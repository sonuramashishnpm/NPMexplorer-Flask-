<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NPMexplorr</title>
    <link rel="icon" href="{{url_for('static', filename='NPM.jpg')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='NPMstyle.css')}}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>

<body class="controller">
    <header id="mainheader" aria-label="Main Header">
        <div class="header-container">
            <h1>NPMexplorer</h1>
            <button class="about" onclick="toggleAbout()">☰</button>
            <button class="hamburger" aria-label="Toggle Menu" onclick="toggleMenu()">☰</button>
        </div>
        <nav id="topmenue" aria-label="Main Navigation">
            <button onclick="window.location.href='{{ url_for('NPMedu') }}'">
                <img src="{{url_for('static', filename='NPMedu.jpg')}}" class="resized-image" alt="NPMedu Icon" loading="lazy"> NPMedu
            </button>
            <button onclick="window.location.href='{{ url_for('NPMnews') }}'">
                <img src="{{url_for('static', filename='NPMnews.jpg')}}" class="resized-image" alt="NPMnews Icon" loading="lazy"> NPMnews
            </button>
            <button onclick="window.location.href='{{ url_for('NPMstocks') }}'">
                <img src="{{url_for('static', filename='NPMstocks.jpg')}}" class="resized-image" alt="NPMstocks Icon" loading="lazy"> NPMstocks
            </button>
            <button onclick="window.location.href='{{ url_for('NPM') }}'">
                <img src="{{url_for('static', filename='NPM.jpg')}}" class="resized-image" alt="NPM Icon" loading="lazy"> NPM
            </button>
            <button onclick="window.location.href='{{ url_for('NPMfinance') }}'">
                <img src="{{url_for('static', filename='NPMfinance.jpg')}}" class="resized-image" alt="NPMfinance Icon" loading="lazy"> NPMfinance
            </button>
            <button onclick="window.location.href='{{ url_for('NPMentertainment') }}'">
                <img src="{{url_for('static', filename='NPMentertainment.jpg')}}" class="resized-image" alt="NPMentertainment" loading="lazy"> NPMentertainment
            </button>
            <button onclick="window.location.href='{{ url_for('NPMai') }}'">
                <img src="{{url_for('static', filename='NPM A.I jpeg.png')}}" class="resized-image" alt="NPM A.I" loading="lazy"> NPM A.I
            </button>
            <button onclick="window.location.href='{{ url_for('NPMboard') }}'">
                <img src="{{url_for('static', filename='NPMboard.jpg')}}" class="resized-image" alt="NPMmap Icon" loading="lazy"> NPM Board
            </button>
            <button onclick='window.location.href="{{ url_for("Sonu") }}"'>
                <img src="{{url_for('static', filename='sonu.png')}}" class="resized-image" alt="Sonu Kumar Icon" loading="lazy"> Sonu Kumar
            </button>
        </nav>
    </header>

    <div class="chatbox">
        <input type="text" id="searchBox" placeholder="Enter a topic..." />
        <button id="search" onclick="searchWikipedia()">Search</button>
        <button id="ai" onclick="askAI()">A.I</button>
        <div id="result" style="margin-top: 15px;"></div>
    </div>

    <section class="hero">
        <h2 class="secondheading" id="typewriter"></h2>
        <p>Discover education, entertainment, and more with NPMexplorer.</p>
        <button class="cta" onclick="toggleSection('buttonstoggle')">Explore Now</button>
    </section>

    <div id="belowsearch">
        <button onclick="toggleSection('buttonstoggle')" class="NPMbriefbuttons" aria-expanded="false">NPMexplorer offers:</button>
        <p>Click above to know NPMexplorer.</p>
        <div id="buttonstoggle" style="display: none;">
            <ol id="sectionList">
                <li>
                    <button onclick="toggleSection('edu-content')" class="NPMbriefbutton" aria-expanded="false">NPMedu</button>
                    <div id="edu-content" style="display:none;" class="section-content">
                        <h3>NPMedu</h3>
                        <p>Explore educational resources from Class 1 to 12, offering:</p>
                        <ol>
                            <li>Lectures</li>
                            <li>Notes</li>
                        </ol>
                    </div>
                </li>
                <li>
                    <button onclick="toggleSection('news-content')" class="NPMbriefbutton" aria-expanded="false">NPMnews</button>
                    <div id="news-content" style="display:none;" class="section-content">
                        <h3>NPMnews</h3>
                        <p>Explore world activities, offering:</p>
                        <ol>
                            <li>Views</li>
                            <li>Live news</li>
                            <li>Daily newspaper for free</li>
                            <li>Summarized news by A.I</li>
                        </ol>
                    </div>
                </li>
                <li>
                    <button onclick="toggleSection('finance-content')" class="NPMbriefbutton" aria-expanded="false">NPMfinance</button>
                    <div id="finance-content" style="display:none;" class="section-content">
                        <h3>NPMfinance</h3>
                        <p>Explore finance, offering:</p>
                        <ol>
                            <li>Financial news</li>
                            <li>Financial education</li>
                            <li>Financial tools</li>
                        </ol>
                    </div>
                </li>
                <li>
                    <button onclick="toggleSection('stocks-content')" class="NPMbriefbutton" aria-expanded="false">NPMstocks</button>
                    <div id="stocks-content" style="display:none;" class="section-content">
                        <h3>NPMstocks</h3>
                        <p>Explore markets, offering:</p>
                        <ol>
                            <li>Market analysis</li>
                            <li>Consolidated news</li>
                            <li>Buy and sell (soon)</li>
                        </ol>
                    </div>
                </li>
                <li>
                    <button onclick="toggleSection('entertainment-content')" class="NPMbriefbutton" aria-expanded="false">NPMentertainment</button>
                    <div id="entertainment-content" style="display:none;" class="section-content">
                        <h3>NPMentertainment</h3>
                        <p>Explore entertainment, offering:</p>
                        <ol>
                            <li>Movies</li>
                            <li>Web series</li>
                            <li>Music</li>
                        </ol>
                    </div>
                </li>
                <li>
                    <button onclick="toggleSection('ai-content')" class="NPMbriefbutton" aria-expanded="false">NPM A.I</button>
                    <div id="ai-content" style="display:none;" class="section-content">
                        <h3>NPM A.I</h3>
                        <p>Explore A.I, offering:</p>
                        <ol>
                            <li>Chatbots</li>
                            <li>Image generation</li>
                            <li>Text generation</li>
                        </ol>
                    </div>
                </li>
                <li>
                    <button onclick="toggleSection('npm-content')" class="NPMbriefbutton" aria-expanded="false">NPM</button>
                    <div id="npm-content" style="display:none;" class="section-content">
                        <h3 class="tag">NPM</h3>
                        <p>Explore everything about NPM.</p>
                    </div>
                </li>
            </ol>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal">
        <h2 style="text-align: center;">About NPMexplorer</h2>
        <ol style="line-height: 1.8; font-family: 'Poppins', sans-serif;">
            <li><strong>Explore a wide range of topics:</strong>  
                NPMexplorer is committed to providing <strong>free educational content</strong> like recorded lectures and detailed notes — helping every student who wants to learn but lacks access to resources.
            </li>
            <li><strong>Access structured educational resources:</strong>  
                You can explore <strong>lectures and notes for every subject</strong> from Class 1 to Class 12 — all available at no cost.
            </li>
            <li><strong>Stay updated with real-time news:</strong>  
                With NPMnews, you stay connected to <strong>20+ trusted news agencies</strong>. Most importantly, you get fresh updates <strong>every 10 minutes</strong>.
            </li>
            <li><strong>Connect with like-minded individuals:</strong>  
                Engage with people who inspire — for example:
                <ol type="a">
                    <li><a href="{{ url_for('Sonu') }}" id="refsonu">Sonu Kumar (Viral Boy)</a></li>
                    <li>Brajesh Maheshwari</li>
                    <li>Kautilya Pandit</li>
                </ol>
            </li>
            <li><strong>Collaborate on meaningful projects:</strong>  
                You can publish <strong>articles and research papers</strong> on NPMnews and NPMexplorer. Step into a world of knowledge and innovation.
            </li>
            <li><strong>Engage in discussions and debates:</strong>  
                Through <strong>NPMsocial</strong>, chat with friends and family, share opinions, and participate in meaningful conversations.
            </li>
            <li><strong>Share your knowledge and insights:</strong>  
                Be a contributor! Add value to the community by sharing your understanding and experience.
            </li>
            <li><strong>Explore the stock market with NPMstocks:</strong>  
                Dive into the financial world with <strong>AI-powered suggestions, fast updates, and real-time market data</strong> — making stock trading smarter and simpler.
            </li>
        </ol>
        <button class="closebtn" onclick="toggleAbout()">Close</button>
    </div>

    <!-- Cartoon Game Overlay -->
    <div id="gameOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:99999;align-items:center;justify-content:center;flex-direction:column;">
        <button onclick="closeGame()" style="position:absolute;top:20px;right:30px;font-size:2rem;background:#fff;border-radius:50%;border:none;width:50px;height:50px;cursor:pointer;">✖</button>
        <div style="margin-top:60px;">
            <div id="cartoonRunner" style="position:relative;width:1500px;height:500px;">
                <img id="runnerImg" src="{{url_for('static', filename='runnerboy.jpeg')}}" alt="sonu" style="position:absolute;left:500px;bottom:5px;width:150px;transition:bottom 0.5s;">
            </div>
            <button onclick="jumpRunner()" style="margin-top:20px;font-size:1.2rem;padding:8px 24px;border-radius:8px;background:#43cea2;color:#fff;border:none;cursor:pointer;">Jump!</button>
            <button onclick="toggleAudio()" id="audioBtn" style="margin-top:20px;font-size:1.2rem;padding:8px 24px;border-radius:8px;background:#1e88e5;color:#fff;border:none;cursor:pointer;">🔊</button>
        </div>
        <audio id="gameAudio" loop>
            <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
        </audio>
        <div style="color:#fff;margin-top:30px;font-size:1.1rem;">Enjoy the run! This can go on for 100 hours! 🚀</div>
    </div>
    <button id="playGameBtn" style="position:fixed;bottom:110px;right:30px;z-index:9999;background:#fff;color:#fd1d1d;border-radius:50%;width:60px;height:60px;font-size:2rem;box-shadow:0 4px 24px #0003;cursor:pointer;">🏃</button>
    <button id="surpriseBtn" style="position:fixed;bottom:30px;left:30px;z-index:9999;background:#fff;color:#1e88e5;border-radius:50%;width:60px;height:60px;font-size:2rem;box-shadow:0 4px 24px #0003;cursor:pointer;">🎉</button>

    <!-- Animated Emoji Character -->
    <div class="emoji-character">
        <span class="emoji-face">🦸‍♂️</span>
    </div>

    <script>
        async function askAI() {
            const query = document.getElementById("searchBox").value;
            const responseEl = document.getElementById("result");
            responseEl.innerHTML = "Thinking...";

            try {
                const res = await fetch("/ask", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ query })
                });

                const data = await res.json();
               if (data.response) {
                  responseEl.innerHTML = data.response;
       responseEl.classList.add("show");   // 👈 make visible
} else {
    responseEl.innerHTML = "No response received.";
    responseEl.classList.add("show");
}

            } catch (err) {
                responseEl.innerHTML = "Error: " + err;
            }
        }

        function toggleMenu() {
            const nav = document.getElementById('topmenue');
            nav.classList.toggle('active');
        }

        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.style.display = section.style.display === 'block' ? 'none' : 'block';
        }

        function searchWikipedia() {
            const query = document.getElementById("searchBox").value.trim();
            if (!query) {
                showResult('<p style="color:red;">❌ Please enter a topic!</p>');
                return;
            }

            const title = encodeURIComponent(query);
            fetch(`https://en.wikipedia.org/api/rest_v1/page/html/${title}`, {
                headers: { "Accept": "text/html" }
            })
                .then(res => {
                    if (!res.ok) {
                        throw new Error("Page not found");
                    }
                    return res.text();
                })
                .then(html => {
                    showResult(html);
                })
                .catch(() => {
                    showResult('<p style="color:red;">❌ No data found or page not available.</p>');
                });
        }

        function toggleAbout() {
            const modal = document.getElementById('aboutModal');
            modal.style.display = (modal.style.display === 'block') ? 'none' : 'block';
        }

        const typewriterTexts = [
            "WELCOME TO NPMexplorer",
            "Discover. Learn. Grow.",
            "Explore Education, News, Stocks, and More!",
            "Your Gateway to Knowledge"
        ];
        let twIndex = 0, charIndex = 0, typing = true;
        function typeWriter() {
            const el = document.getElementById("typewriter");
            if (!el) return;
            if (typing) {
                if (charIndex < typewriterTexts[twIndex].length) {
                    el.innerHTML += typewriterTexts[twIndex].charAt(charIndex);
                    charIndex++;
                    setTimeout(typeWriter, 70);
                } else {
                    typing = false;
                    setTimeout(typeWriter, 1200);
                }
            } else {
                if (charIndex > 0) {
                    el.innerHTML = typewriterTexts[twIndex].substring(0, charIndex - 1);
                    charIndex--;
                    setTimeout(typeWriter, 30);
                } else {
                    typing = true;
                    twIndex = (twIndex + 1) % typewriterTexts.length;
                    setTimeout(typeWriter, 500);
                }
            }
        }
        window.addEventListener("DOMContentLoaded", typeWriter);

        function showResult(html) {
            const resultDiv = document.getElementById("result");
            resultDiv.classList.remove("show");
            resultDiv.innerHTML = html;
            setTimeout(() => resultDiv.classList.add("show"), 50);
        }

        const surpriseFacts = [
            "Did you know? Honey never spoils.",
            "Fun Fact: Bananas are berries, but strawberries aren't!",
            "Motivation: Every expert was once a beginner.",
            "Joke: Why did the math book look sad? Because it had too many problems.",
            "Quote: 'The best way to get started is to quit talking and begin doing.' – Walt Disney",
            "Random: A group of flamingos is called a 'flamboyance'."
        ];
        function randomColor() {
            const colors = ["#43cea2", "#fd1d1d", "#f7971e", "#1e88e5", "#ff6f61", "#8e44ad"];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        function surpriseMe() {
            document.body.style.transition = "background 0.5s";
            document.body.style.background = `radial-gradient(circle, ${randomColor()} 0%, #fff 100%)`;
            setTimeout(() => {
                document.body.style.background = "";
            }, 700);

            const fact = surpriseFacts[Math.floor(Math.random() * surpriseFacts.length)];
            showResult(`<div style="font-size:1.5rem;text-align:center;padding:2rem 1rem;">${fact}</div>`);
        }
        document.getElementById("surpriseBtn").onclick = surpriseMe;

        let runnerInterval = null;
        let runnerPos = 0;
        let running = false;
        function startRunner() {
            if (running) return;
            running = true;
            runnerPos = 0;
            const runner = document.getElementById("runnerImg");
            runner.style.left = "0px";
            runnerInterval = setInterval(() => {
                runnerPos += 4;
                if (runnerPos > 1500) runnerPos = 0;
                runner.style.left = runnerPos + "px";
            }, 30);
        }
        function stopRunner() {
            running = false;
            clearInterval(runnerInterval);
        }
        function jumpRunner() {
            const runner = document.getElementById("runnerImg");
            runner.style.bottom = "500px";
            setTimeout(() => {
                runner.style.bottom = "0px";
            }, 500);
        }

        function playAudio() {
            const audio = document.getElementById("gameAudio");
            audio.play();
            document.getElementById("audioBtn").innerText = "🔊";
        }
        function pauseAudio() {
            const audio = document.getElementById("gameAudio");
            audio.pause();
            document.getElementById("audioBtn").innerText = "🔇";
        }
        function toggleAudio() {
            const audio = document.getElementById("gameAudio");
            if (audio.paused) {
                playAudio();
            } else {
                pauseAudio();
            }
        }

        document.getElementById("playGameBtn").onclick = function () {
            document.getElementById("gameOverlay").style.display = "flex";
            startRunner();
            playAudio();
        };
        function closeGame() {
            document.getElementById("gameOverlay").style.display = "none";
            stopRunner();
            pauseAudio();
        }
    </script>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 1000,
            once: true,
        });

        window.addEventListener("scroll", () => {
            document.querySelectorAll(".animated-section").forEach(section => {
                const top = section.getBoundingClientRect().top;
                const trigger = window.innerHeight - 100;
                if (top < trigger) {
                    section.classList.add("show");
                }
            });
        });
        window.dispatchEvent(new Event("scroll"));
    </script>
</body>
</html>
